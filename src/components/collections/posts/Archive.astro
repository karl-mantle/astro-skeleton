---
import type { Page } from "astro";
import type { HTMLAttributes } from "astro/types";
import type { CollectionEntry } from "astro:content";
import { collectionsConfig } from "~/site.config";
import Card from "~/components/collections/posts/Card.astro";
import SimplePagination from "~/components/ui/pagination/Simple.astro";

interface Props extends HTMLAttributes<"div"> {
  page: Page<CollectionEntry<"posts">>;
}

const { page, class: className }: Props = Astro.props;
---

<div class:list={["mx-auto flex max-w-5xl flex-col gap-4 px-4 md:gap-8", className]}>
  <ol
    class="grid gap-4 sm:grid-cols-2 md:grid-cols-3 md:gap-8"
    aria-label="Posts, most recent first"
  >
    {
      page.data.map((post) => (
        <Card
          date={post.data.pubDate}
          description={post.data.description}
          heading={post.data.title}
          image={post.data.image}
          href={`${import.meta.env.BASE_URL}${collectionsConfig.permalink_posts_entry}${post.data.slug}`}
        />
      ))
    }
  </ol>

  <SimplePagination page={page} aria-label="Posts archive pagination" />
</div>
