---
import type { ImageMetadata } from "astro";
import type { HTMLAttributes } from "astro/types";
import { Image } from "astro:assets";
import { Icon } from "astro-icon/components";
import Date from "~/components/ui/Date.astro";

interface Props extends HTMLAttributes<"li"> {
  date: Date;
  description: string;
  heading: string;
  href: string;
  image?: {
    alt: string | null;
    src: ImageMetadata;
  };
}

const { date, description, heading, href, image }: Props = Astro.props;
---

<li>
  <a
    class="group/card hover:text-primary-950 focus-visible:border-primary-300 focus-visible:bg-primary-100/25 flex flex-grow flex-col-reverse gap-4 border-2 border-transparent p-1 focus-visible:border-3 focus-visible:text-black lg:flex-row-reverse"
    href={href}
  >
    <Icon
      name="material-symbols:arrow-right-alt"
      height={24}
      width={24}
      class="shrink-0 transition-transform duration-300 group-hover/card:-rotate-45 group-focus/card:-rotate-45"
    />

    <article class="flex flex-grow flex-col gap-2 text-sm">
      <h3>
        {heading}
      </h3>
      <Date date={date} />
      <p>{description}</p>
    </article>

    {
      image && (
        <Image
          alt={image.alt}
          class="aspect-video object-cover opacity-75 transition duration-300 group-hover/card:opacity-100 group-focus/card:opacity-100 lg:h-fit lg:max-w-48"
          format="webp"
          width={450}
          src={image.src}
          loading="lazy"
        />
      )
    }
  </a>
</li>
