---
import type { ImageMetadata } from "astro";
import type { HTMLAttributes } from "astro/types";
import { Image } from "astro:assets";
import { Icon } from "astro-icon/components";

interface Props extends HTMLAttributes<"li"> {
  description: string;
  heading: string;
  href: string;
  image?: {
    alt: string | null;
    src: ImageMetadata;
  };
}

const { description, heading, href, image }: Props = Astro.props;
---

<li>
  <a
    class="group/card text-primary-50 focus-visible:bg-focus-visible relative flex h-full flex-col overflow-hidden border-transparent bg-black hover:text-white focus-visible:border-2 focus-visible:text-black"
    href={href}
    aria-label={`Link to ${heading}`}
  >
    <article
      class="z-5 flex min-h-40 flex-grow flex-col gap-2 rounded-xl p-4 backdrop-blur-[1px] transition duration-300 group-hover/card:backdrop-blur-xs"
    >
      <div class="flex justify-between gap-4">
        <h3>{heading}</h3>
        <Icon
          name="material-symbols:arrow-right-alt"
          height={21}
          width={21}
          class="min-w-5 transition duration-300 group-hover/card:-rotate-45 group-focus/card:-rotate-45"
        />
      </div>
      <p class="text-sm">{description}</p>
    </article>

    {
      image && (
        <Image
          alt={image.alt}
          class="absolute inset-0 h-full object-cover opacity-50 transition duration-300 group-focus/card:hidden"
          format="webp"
          width={420}
          src={image.src}
          loading="lazy"
        />
      )
    }
  </a>
</li>
