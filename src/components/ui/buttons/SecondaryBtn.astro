---
import type { HTMLAttributes } from "astro/types";
import { Icon } from "astro-icon/components";

interface Props extends HTMLAttributes<"a"> {
  disabled?: boolean;
  label: string;
  icon?: string;
  iconAnimate?: boolean;
  iconReverse?: boolean;
  iconSize?: number;
  openNewTab?: boolean;
}

const {
  disabled,
  label,
  icon,
  iconAnimate,
  iconReverse,
  iconSize = 21,
  openNewTab,
  href,
  class: className,
  ...rest
}: Partial<Props> = Astro.props;

const newTabAttributes = openNewTab ? { target: "_blank", rel: "noreferrer noopener" } : {};
---

<a
  class:list={[
    "group/btn focus-visible:bg-focus-visible hover:text-primary-50 border-primary-900 hover:bg-primary-900 flex w-full items-center justify-center border-2 bg-transparent p-2 px-4 font-medium transition duration-300 focus-visible:border-b-2 focus-visible:border-black focus-visible:text-black md:w-fit",
    label && icon ? "gap-2" : "",
    iconReverse ? "flex-row-reverse" : "",
    disabled && "text-primary-200 cursor-not-allowed",
    className,
  ]}
  href={disabled ? undefined : href}
  aria-disabled={disabled ? "true" : undefined}
  {...newTabAttributes}
  {...rest}
>
  <span>{label}</span>

  {
    icon && (
      <Icon
        class:list={[
          "self-center",
          iconAnimate ? "transition duration-300 group-hover/btn:-rotate-45" : "",
        ]}
        name={icon}
        height={iconSize}
        width={iconSize}
      />
    )
  }
</a>
